{% extends 'base.html.twig' %}

{% block title %}{% endblock %}

{% block body %}
    <div class="container-fluid ">
        <div class="my-5 text-center">
            <h1>Accepter/refuser les destinataires</h1>
            <p>Vous trouverez ici les destinataires ayant fait leur demande de souscription</p>
            <p>Vous pouvez les accepter ou les refuser</p>
            <p>Un Email indiquant votre choix leur sera automatiquement envoyé</p>
        </div>


        <table class="table">
            <thead>

            <tr>
                {# <th>Id</th>#}
                <th>Nom <i class="fa fa-arrows-v" aria-hidden="true"></i>
                </th>
                <th>Prénom <i class="fa fa-arrows-v" aria-hidden="true"></i>
                </th>
                {# <th>Adresse Mail <i class="fa fa-arrows-v" aria-hidden="true"></i>
                 </th>
                 <th>Numéro téléphone <i class="fa fa-arrows-v" aria-hidden="true"></i>#}
                </th>
                <th>Numéro rue <i class="fa fa-arrows-v" aria-hidden="true"></i>
                </th>
                <th>Adresse <i class="fa fa-arrows-v" aria-hidden="true"></i>
                </th>
                {# <th>Complément adresse
                 </th>#}
                <th>Code Postal <i class="fa fa-arrows-v" aria-hidden="true"></i>
                </th>
                <th>Ville <i class="fa fa-arrows-v" aria-hidden="true"></i>
                </th>
                <th>Select</th>
                {# <th>Ok Mail</th>
                 <th>Ok Sms</th>#}
            </tr>





            </thead>
            <tbody>
            {% for result in results %}

                <tr>
                    {# <td>{{ result.id }}</td>#}
                    <td>{{ result.nomDestinataire }}</td>
                    <td>{{ result.prenomDestinataire }}</td>
                    {#   <td>{{ result.adresseMailDestinataire ? result.adresseMailDestinataire : "Non renseigné" }}</td>
                       <td>{{ result.numeroTelephoneDestinataire ? result.numeroTelephoneDestinataire : "Non renseigné" }}</td>#}
                    <td>{{ result.numeroRueDestinataire }}</td>
                    <td>{{ result.nomRueDestinataire1 }}</td>
                    {#<td>{{ result.nomRueDestinataire2 }}</td>#}

                    <td>{{ result.idAdresse.cp }}</td>
                    <td>{{ result.idAdresse.nomVille }}</td>

                    {#

                                    <td>{{ result.okMailDestinataire ? "Oui" : "Non" }}</td>
                                    <td>{{ result.okSmsDestinataire ? "Oui" : "Non" }}</td>
                    #}

                    {#
                                    <label for="checkboxes">
                                    <td><input type="checkbox"  name="checkboxes[]" class="checkboxes" value= "{{ result.id }}"></td>
                                    </label>#}



                    <td><a href="{{ path ('valider_destinataire', {'id' : result.id})}}" class="btn btn-success " >Valider</a></td>
                    <td><a href="{{ path ('refuser_destinataire', {'id' : result.id})}}" class="btn btn-danger " >Refuser</a></td>


                </tr>


            {% else %}
                <tr>
                    <td colspan="16">Aucun destinaire ne correspond à votre recherche</td>
                </tr>

            {% endfor %}


            </tbody>

        </table>
        <div class="d-flex">
            <div class="p-2 mr-auto">
                <a class="  btn btn-primary" href="{{ path('plateforme_admin') }}">Retour plateforme</a>
            </div>
            <div class="p-2 " >
                {# <label for="selectAll">
                     <input type="checkbox" name="checkAll" class="checkAll " >
                 </label>Select all#}


                <a href="{{ path ('valider_all_destinataire')}}" class="btn btn-success submit " type="submit"  >Valider tous</a>
                <a href="{{ path ('refuser_all_destinataire')}}" class="btn btn-danger ml-auto" type="submit" >Refuser tous</a>


            </div>
        </div>
    </div>
    {% block stylesheets %}
        <script src="{{ asset("js/accept.js") }}"></script>
        <script src="{{ asset("js/recherche.js") }}"></script>


        <link rel="stylesheet" href="{{ asset("css/recherche.css") }}">
    {% endblock %}

{% endblock %}
